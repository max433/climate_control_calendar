# =====================================================
# Test Climate Entities Configuration
# =====================================================
# Add this to your Home Assistant configuration.yaml
# to create fake climate entities for testing all
# Climate Control Calendar features
# =====================================================

# Climate template entities (require input helpers below)
climate:
  # 1. FULL CLIMATE - Tests all advanced features
  - platform: template
    name: "Test Full Climate"
    unique_id: "test_full_climate"

    modes:
      - "off"
      - "heat"
      - "cool"
      - "heat_cool"
      - "auto"
      - "dry"
      - "fan_only"

    fan_modes:
      - "auto"
      - "low"
      - "medium"
      - "high"
      - "turbo"

    swing_modes:
      - "off"
      - "vertical"
      - "horizontal"
      - "both"

    preset_modes:
      - "none"
      - "eco"
      - "away"
      - "boost"
      - "comfort"
      - "sleep"

    min_temp: 16
    max_temp: 30
    temp_step: 0.5

    min_humidity: 30
    max_humidity: 90

    current_temperature_template: "{{ states('input_number.test_full_current_temp') | float }}"
    current_humidity_template: "{{ states('input_number.test_full_current_humidity') | int }}"
    temperature_template: "{{ states('input_number.test_full_target_temp') | float }}"
    target_humidity_template: "{{ states('input_number.test_full_target_humidity') | int }}"
    hvac_mode_template: "{{ states('input_select.test_full_hvac_mode') }}"
    fan_mode_template: "{{ states('input_select.test_full_fan_mode') }}"
    swing_mode_template: "{{ states('input_select.test_full_swing_mode') }}"
    preset_mode_template: "{{ states('input_select.test_full_preset_mode') }}"

    set_temperature:
      - service: input_number.set_value
        data:
          entity_id: input_number.test_full_target_temp
          value: "{{ temperature }}"

    set_humidity:
      - service: input_number.set_value
        data:
          entity_id: input_number.test_full_target_humidity
          value: "{{ humidity }}"

    set_hvac_mode:
      - service: input_select.select_option
        data:
          entity_id: input_select.test_full_hvac_mode
          option: "{{ hvac_mode }}"

    set_fan_mode:
      - service: input_select.select_option
        data:
          entity_id: input_select.test_full_fan_mode
          option: "{{ fan_mode }}"

    set_swing_mode:
      - service: input_select.select_option
        data:
          entity_id: input_select.test_full_swing_mode
          option: "{{ swing_mode }}"

    set_preset_mode:
      - service: input_select.select_option
        data:
          entity_id: input_select.test_full_preset_mode
          option: "{{ preset_mode }}"

  # 2. HEAT PUMP WITH AUX - Tests aux_heat
  - platform: template
    name: "Test Heat Pump with Aux"
    unique_id: "test_heat_pump_aux"

    modes:
      - "off"
      - "heat"
      - "cool"
      - "heat_cool"

    min_temp: 15
    max_temp: 28

    current_temperature_template: "{{ states('input_number.test_hp_current_temp') | float }}"
    temperature_template: "{{ states('input_number.test_hp_target_temp') | float }}"
    hvac_mode_template: "{{ states('input_select.test_hp_hvac_mode') }}"

    hvac_action_template: >
      {% if is_state('input_boolean.test_hp_aux_heat', 'on') %}
        heating
      {% else %}
        idle
      {% endif %}

    aux_heat_template: "{{ is_state('input_boolean.test_hp_aux_heat', 'on') }}"

    set_temperature:
      - service: input_number.set_value
        data:
          entity_id: input_number.test_hp_target_temp
          value: "{{ temperature }}"

    set_hvac_mode:
      - service: input_select.select_option
        data:
          entity_id: input_select.test_hp_hvac_mode
          option: "{{ hvac_mode }}"

    turn_aux_heat_on:
      - service: input_boolean.turn_on
        data:
          entity_id: input_boolean.test_hp_aux_heat

    turn_aux_heat_off:
      - service: input_boolean.turn_off
        data:
          entity_id: input_boolean.test_hp_aux_heat

  # 3. SIMPLE THERMOSTAT - Tests basic temperature range
  - platform: template
    name: "Test Simple Thermostat"
    unique_id: "test_simple_thermostat"

    modes:
      - "off"
      - "heat"
      - "cool"
      - "heat_cool"

    min_temp: 10
    max_temp: 35
    temp_step: 1

    current_temperature_template: "{{ states('input_number.test_simple_current_temp') | float }}"
    temperature_template: "{{ states('input_number.test_simple_target_temp') | float }}"
    hvac_mode_template: "{{ states('input_select.test_simple_hvac_mode') }}"

    set_temperature:
      - service: input_number.set_value
        data:
          entity_id: input_number.test_simple_target_temp
          value: "{{ temperature }}"

    set_hvac_mode:
      - service: input_select.select_option
        data:
          entity_id: input_select.test_simple_hvac_mode
          option: "{{ hvac_mode }}"

# =====================================================
# Input Helpers (Backend for Template Climate)
# =====================================================

input_number:
  # Full Climate Backend
  test_full_current_temp:
    name: "Test Full - Current Temperature"
    min: 0
    max: 50
    step: 0.1
    initial: 20
    unit_of_measurement: "°C"

  test_full_target_temp:
    name: "Test Full - Target Temperature"
    min: 16
    max: 30
    step: 0.5
    initial: 22
    unit_of_measurement: "°C"

  test_full_current_humidity:
    name: "Test Full - Current Humidity"
    min: 0
    max: 100
    step: 1
    initial: 50
    unit_of_measurement: "%"

  test_full_target_humidity:
    name: "Test Full - Target Humidity"
    min: 30
    max: 90
    step: 5
    initial: 50
    unit_of_measurement: "%"

  # Heat Pump Backend
  test_hp_current_temp:
    name: "Test HP - Current Temperature"
    min: 0
    max: 50
    step: 0.1
    initial: 18
    unit_of_measurement: "°C"

  test_hp_target_temp:
    name: "Test HP - Target Temperature"
    min: 15
    max: 28
    step: 0.5
    initial: 20
    unit_of_measurement: "°C"

  # Simple Thermostat Backend
  test_simple_current_temp:
    name: "Test Simple - Current Temperature"
    min: 0
    max: 50
    step: 0.1
    initial: 19
    unit_of_measurement: "°C"

  test_simple_target_temp:
    name: "Test Simple - Target Temperature"
    min: 10
    max: 35
    step: 1
    initial: 21
    unit_of_measurement: "°C"

input_select:
  # Full Climate Backend
  test_full_hvac_mode:
    name: "Test Full - HVAC Mode"
    options:
      - "off"
      - "heat"
      - "cool"
      - "heat_cool"
      - "auto"
      - "dry"
      - "fan_only"
    initial: "off"

  test_full_fan_mode:
    name: "Test Full - Fan Mode"
    options:
      - "auto"
      - "low"
      - "medium"
      - "high"
      - "turbo"
    initial: "auto"

  test_full_swing_mode:
    name: "Test Full - Swing Mode"
    options:
      - "off"
      - "vertical"
      - "horizontal"
      - "both"
    initial: "off"

  test_full_preset_mode:
    name: "Test Full - Preset Mode"
    options:
      - "none"
      - "eco"
      - "away"
      - "boost"
      - "comfort"
      - "sleep"
    initial: "none"

  # Heat Pump Backend
  test_hp_hvac_mode:
    name: "Test HP - HVAC Mode"
    options:
      - "off"
      - "heat"
      - "cool"
      - "heat_cool"
    initial: "off"

  # Simple Thermostat Backend
  test_simple_hvac_mode:
    name: "Test Simple - HVAC Mode"
    options:
      - "off"
      - "heat"
      - "cool"
      - "heat_cool"
    initial: "off"

input_boolean:
  test_hp_aux_heat:
    name: "Test HP - Auxiliary Heat"
    initial: false

# =====================================================
# Usage Instructions
# =====================================================
# 1. Add this configuration to configuration.yaml
# 2. Restart Home Assistant
# 3. Three climate entities will be created:
#    - climate.test_full_climate (all features)
#    - climate.test_heat_pump_with_aux (aux_heat)
#    - climate.test_simple_thermostat (basic)
# 4. Use these entities in Climate Control Calendar
#    configuration to test all payload types
# =====================================================
