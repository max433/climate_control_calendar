{
  "config": {
    "step": {
      "user": {
        "title": "Select Calendars",
        "description": "Choose one or more calendar entities to monitor for climate control events.\n\n**Multi-Calendar Support**: You can select multiple calendars. Events from all calendars will be monitored simultaneously, with priority-based conflict resolution.\n\n**Examples**: Work calendar, personal calendar, vacation calendar, etc.\n\nAvailable calendars: {calendar_count}",
        "data": {
          "calendar_entities": "Calendar Entities"
        }
      },
      "climate": {
        "title": "Select Climate Devices (Global Pool)",
        "description": "Select climate devices that will be controlled by this integration.\n\n**Global Pool**: These devices form the default pool. You can later create specific bindings that target only certain devices.\n\n**Tip**: It's okay to leave this empty and configure device targeting in bindings instead.\n\nSelected calendars: {calendar_entities}\nAvailable climate devices: {climate_count}",
        "data": {
          "climate_entities": "Climate Entities (optional)"
        }
      },
      "options": {
        "title": "Initial Configuration",
        "description": "Configure basic operational settings. You can change these later in the integration options.\n\n**Dry Run Mode**: Enable this to test your configuration without actually changing climate device states.\n\n**Debug Mode**: Enable verbose logging for troubleshooting.\n\nCalendars: {calendar_entities}\nClimate devices: {climate_count}",
        "data": {
          "dry_run": "Dry Run Mode (test without applying changes)",
          "debug_mode": "Debug Mode (verbose logging)"
        }
      }
    },
    "error": {
      "calendar_not_found": "One or more selected calendar entities were not found",
      "no_calendars": "No calendar entities found in Home Assistant",
      "no_calendars_selected": "Please select at least one calendar",
      "cannot_connect": "Failed to connect to calendar entity",
      "invalid_slot_id": "Invalid slot ID",
      "invalid_binding_id": "Invalid binding ID",
      "invalid_yaml": "Invalid YAML format",
      "invalid_temperature": "Temperature must be between -50 and 50",
      "slot_not_found": "Slot not found",
      "binding_not_found": "Binding not found",
      "invalid_pattern": "Invalid match pattern",
      "required": "This field is required",
      "above_or_below_required": "At least one of 'above' or 'below' must be specified",
      "invalid_time_format": "Time must be in HH:MM format (e.g., 08:00)",
      "invalid_template": "Template must contain {{ }} markers",
      "unknown": "Unexpected error occurred"
    },
    "abort": {
      "already_configured": "This calendar combination is already configured",
      "no_calendars": "No calendar entities available. Please install and configure a calendar integration first."
    }
  },
  "options": {
    "step": {
      "init": {
        "title": "Configuration Manager",
        "description": "Manage all aspects of your Climate Control Calendar integration.\n\n**Current Configuration:**\n• Calendars: {calendar_count}\n• Climate Devices: {climate_count}\n• Slots: {slot_count}\n• Bindings: {binding_count}\n\nSelect a configuration area to manage:",
        "menu_options": {
          "basic": "Basic Settings",
          "calendars": "Calendar Configuration",
          "slots": "Slots Management",
          "bindings": "Bindings Management",
          "yaml_editor": "YAML Editor (Advanced)"
        }
      },
      "basic": {
        "title": "Basic Settings",
        "description": "Configure global climate devices and operational modes.\n\n**Global Climate Pool**: Select devices to be controlled by default. Individual bindings can override this to target specific devices.\n\n**Operational Modes**: Configure dry run and debug settings.",
        "data": {
          "climate_entities": "Global Climate Entities Pool",
          "dry_run": "Dry Run Mode (simulate changes only)",
          "debug_mode": "Debug Mode (verbose logging)"
        }
      },
      "calendars": {
        "title": "Calendar Configuration",
        "description": "Configure individual calendar settings.\n\n**Enable/Disable**: Temporarily disable calendars without removing them.\n**Default Priority**: Set default priority for all bindings from this calendar (higher = more important).\n\n**Selected Calendars:**\n{calendar_list}",
        "data": {
          "calendar_id": "Calendar to Configure"
        },
        "data_description": {
          "calendar_id": "Select a calendar to configure its settings"
        }
      },
      "calendar_detail": {
        "title": "Configure: {calendar_name}",
        "description": "Adjust settings for this specific calendar.\n\n**Enabled**: Uncheck to temporarily ignore events from this calendar.\n**Default Priority**: Used when bindings don't specify their own priority. Higher values take precedence.\n**Description**: Optional note for this calendar.\n\nCurrent bindings from this calendar: {binding_count}",
        "data": {
          "enabled": "Enabled",
          "default_priority": "Default Priority (0-100)",
          "description": "Description (optional)"
        }
      },
      "slots": {
        "title": "Slots Management",
        "description": "Manage climate slots (reusable templates).\n\n**What are slots?** Slots define climate settings (temperature, HVAC mode, etc.) that can be activated by calendar events through bindings.\n\n**Current Slots:** {slot_count}\n\nSelect an action:",
        "menu_options": {
          "add_slot": "Add New Slot",
          "edit_slot": "Edit Existing Slot",
          "delete_slot": "Delete Slot",
          "view_slots": "View All Slots"
        }
      },
      "add_slot": {
        "title": "Add New Slot",
        "description": "Create a new climate slot template.\n\n**Slot Structure:**\n• Label: Human-readable name (required)\n• Default Climate Payload: Settings applied to all devices\n• Entity Overrides: Device-specific settings (optional)\n• Excluded Entities: Skip certain devices (optional)\n\n**Template Support**: Temperature and humidity fields support Jinja2 templates for dynamic values.\n\n**Example**: Label='Comfort', Temperature=22 or {{ states('input_number.target') | float }}",
        "data": {
          "label": "Slot Label",
          "temperature": "Temperature (°C)",
          "target_temp_high": "Temperature High (heat_cool mode)",
          "target_temp_low": "Temperature Low (heat_cool mode)",
          "hvac_mode": "HVAC Mode",
          "preset_mode": "Preset Mode",
          "humidity": "Humidity (%)",
          "aux_heat": "Auxiliary Heat"
        },
        "data_description": {
          "label": "e.g., 'Comfort', 'Eco', 'Sleep'",
          "temperature": "Static value (21.5) or template ({{ states('sensor.temp') | float + 2 }})",
          "target_temp_high": "Static value or template for heat_cool mode upper limit",
          "target_temp_low": "Static value or template for heat_cool mode lower limit",
          "hvac_mode": "e.g., heat, cool, heat_cool, auto, off",
          "preset_mode": "e.g., away, home, eco, boost",
          "humidity": "Static value (60) or template ({{ states('input_number.humidity') | int }})"
        }
      },
      "edit_slot": {
        "title": "Edit Slot",
        "description": "Select a slot to modify.\n\nCurrent slots: {slot_count}\n\n**Tip**: Use YAML Editor for bulk operations.",
        "data": {
          "slot_id": "Slot to Edit"
        }
      },
      "edit_slot_detail": {
        "title": "Edit: {slot_label}",
        "description": "Modify slot settings.\n\n**Slot ID**: {slot_id}\n**Bindings using this slot**: {binding_count}\n\n**Template Support**: Temperature and humidity fields support both static values and Jinja2 templates.\n\n**Warning**: Changes affect all bindings that use this slot.",
        "data": {
          "label": "Slot Label",
          "temperature": "Temperature (°C)",
          "target_temp_high": "Temperature High (heat_cool mode)",
          "target_temp_low": "Temperature Low (heat_cool mode)",
          "hvac_mode": "HVAC Mode",
          "preset_mode": "Preset Mode",
          "humidity": "Humidity (%)",
          "aux_heat": "Auxiliary Heat"
        },
        "data_description": {
          "temperature": "Static value (21.5) or template ({{ states('sensor.temp') | float + 2 }})",
          "target_temp_high": "Static value or template for heat_cool mode upper limit",
          "target_temp_low": "Static value or template for heat_cool mode lower limit",
          "humidity": "Static value (60) or template ({{ states('input_number.humidity') | int }})"
        }
      },
      "delete_slot": {
        "title": "Delete Slot",
        "description": "Select a slot to remove.\n\n**Warning**: Bindings referencing this slot will fail until reconfigured.\n\nCurrent slots: {slot_count}",
        "data": {
          "slot_id": "Slot to Delete"
        }
      },
      "view_slots": {
        "title": "All Slots",
        "description": "Current slot configuration:\n\n{slots_summary}\n\n**Tip**: Use the YAML Editor for advanced editing."
      },
      "bindings": {
        "title": "Bindings Management",
        "description": "Manage event-to-slot bindings.\n\n**What are bindings?** Bindings connect calendar events to slots based on patterns (e.g., event summary matches 'Morning').\n\n**Current Bindings:** {binding_count}\n\nSelect an action:",
        "menu_options": {
          "add_binding": "Add New Binding",
          "edit_binding": "Edit Existing Binding",
          "delete_binding": "Delete Binding",
          "view_bindings": "View All Bindings"
        }
      },
      "add_binding": {
        "title": "Add New Binding",
        "description": "Create a binding between calendar events and a slot.\n\n**Binding Structure:**\n• Calendars: Which calendar(s) to monitor (or * for all)\n• Match Pattern: How to identify events (summary, contains, regex)\n• Target Slot: Which slot to activate\n• Target Entities: Specific devices (optional, uses global pool if empty)\n• Priority: Conflict resolution (optional, uses calendar default)\n\n**Example**: Summary contains 'Morning' → Comfort slot",
        "data": {
          "calendars": "Calendar Filter",
          "match_type": "Match Type",
          "match_value": "Match Value",
          "slot_id": "Target Slot",
          "priority": "Priority (0-100, optional)"
        },
        "data_description": {
          "calendars": "Select specific calendar(s) or '*' for all",
          "match_type": "How to match events: summary (exact), summary_contains, regex",
          "match_value": "Pattern to match (e.g., 'Morning', 'Work', 'smart.*')",
          "slot_id": "Slot to activate when pattern matches",
          "priority": "Leave empty to use calendar's default priority"
        }
      },
      "edit_binding": {
        "title": "Edit Binding",
        "description": "Select a binding to modify.\n\nCurrent bindings: {binding_count}",
        "data": {
          "binding_id": "Binding to Edit"
        }
      },
      "edit_binding_detail": {
        "title": "Edit: {match_pattern}",
        "description": "Modify binding settings.\n\n**Binding ID**: {binding_id}\n\n**Note**: Changes to match pattern or calendars will affect when this binding is triggered.",
        "data": {
          "calendars": "Calendar Filter",
          "match_type": "Match Type",
          "match_value": "Match Value",
          "slot_id": "Target Slot",
          "priority": "Priority (0-100, optional)"
        },
        "data_description": {
          "calendars": "Select specific calendar(s) or '*' for all",
          "match_type": "How to match events: summary (exact), summary_contains, regex",
          "match_value": "Pattern to match (e.g., 'Morning', 'Work', 'smart.*')",
          "slot_id": "Slot to activate when pattern matches",
          "priority": "Leave empty to use calendar's default priority"
        }
      },
      "delete_binding": {
        "title": "Delete Binding",
        "description": "Select a binding to remove.\n\nCurrent bindings: {binding_count}",
        "data": {
          "binding_id": "Binding to Delete"
        }
      },
      "view_bindings": {
        "title": "All Bindings",
        "description": "Current binding configuration:\n\n{bindings_summary}\n\n**Tip**: Use the YAML Editor for advanced editing."
      },
      "yaml_editor": {
        "title": "YAML Editor (Advanced)",
        "description": "Edit configuration directly in YAML format.\n\n**⚠️ Advanced Feature**: Manual YAML editing. Invalid YAML will be rejected.\n\n**Sections Available:**\n• Slots\n• Bindings\n• Calendar Configs\n\n**Tip**: Export current config, edit externally, then import.",
        "menu_options": {
          "edit_slots_yaml": "Edit Slots (YAML)",
          "edit_bindings_yaml": "Edit Bindings (YAML)",
          "edit_calendar_configs_yaml": "Edit Calendar Configs (YAML)"
        }
      },
      "edit_slots_yaml": {
        "title": "Edit Slots (YAML)",
        "description": "**Current Slots Configuration:**\n\n```yaml\n{current_yaml}\n```\n\n**Instructions:**\n1. Copy the YAML above\n2. Edit carefully (maintain structure)\n3. Paste back and submit\n4. Validation will run before saving\n\n**Note**: Syntax errors will prevent saving.",
        "data": {
          "yaml_content": "Slots YAML Configuration"
        }
      },
      "edit_bindings_yaml": {
        "title": "Edit Bindings (YAML)",
        "description": "**Current Bindings Configuration:**\n\n```yaml\n{current_yaml}\n```\n\n**Instructions:**\n1. Copy the YAML above\n2. Edit carefully (maintain structure)\n3. Paste back and submit\n4. Validation will run before saving\n\n**Conditions Support** (Optional):\nAdd `conditions` field to bindings for smart activation. All conditions must pass (AND logic).\n\n**Supported Types:**\n• `state`: Check entity state\n• `numeric_state`: Numeric comparison (above/below)\n• `time`: Time range and weekday\n• `template`: Custom Jinja2 logic\n\n**Example with Conditions:**\n```yaml\n- id: binding123\n  calendars: '*'\n  match:\n    type: summary_contains\n    value: WFH\n  conditions:\n    - type: numeric_state\n      entity_id: sensor.external_temp\n      below: 15\n    - type: state\n      entity_id: binary_sensor.window\n      state: 'off'\n    - type: time\n      after: '08:00'\n      before: '18:00'\n      weekday: [mon, tue, wed, thu, fri]\n  slot_id: comfort_slot\n  priority: 10\n```\n\n**Note**: Syntax errors will prevent saving.",
        "data": {
          "yaml_content": "Bindings YAML Configuration"
        }
      },
      "edit_calendar_configs_yaml": {
        "title": "Edit Calendar Configs (YAML)",
        "description": "**Current Calendar Configs:**\n\n```yaml\n{current_yaml}\n```\n\n**Instructions:**\n1. Copy the YAML above\n2. Edit carefully (maintain structure)\n3. Paste back and submit\n4. Validation will run before saving\n\n**Note**: Syntax errors will prevent saving.",
        "data": {
          "yaml_content": "Calendar Configs YAML Configuration"
        }
      },
      "binding_conditions_choice": {
        "title": "Add Conditions (Optional)",
        "description": "**Conditions** allow smart binding activation based on sensors, time, or custom logic.\n\n**Current Status:** {condition_count} condition(s) configured.\n\nConditions are evaluated every 60 seconds. All conditions must pass (AND logic) for the binding to activate.\n\n**Use Cases:**\n• Activate heating only if outdoor temp < 15°C\n• Enable slot only when windows are closed\n• Time-based activation (work hours, weekdays)\n• Complex sensor logic via templates\n\n**GUI Limit:** Up to 5 conditions. For more complex scenarios, use YAML editor.",
        "data": {
          "add_conditions": "Configure Conditions?"
        }
      },
      "select_condition_type": {
        "title": "Select Condition Type",
        "description": "Choose the type of condition to add.\n\n**Available Types:**\n\n• **State**: Check if an entity has a specific state (e.g., window = 'off')\n• **Numeric State**: Compare numeric sensor values (e.g., temp < 15)\n• **Time**: Time range and weekday filters (e.g., 08:00-18:00, Mon-Fri)\n• **Template**: Custom Jinja2 logic for complex conditions",
        "data": {
          "condition_type": "Condition Type"
        }
      },
      "configure_state_condition": {
        "title": "Configure State Condition",
        "description": "Check if an entity has a specific state.\n\n**Examples:**\n• Window closed: entity = binary_sensor.window, state = 'off'\n• Presence detected: entity = binary_sensor.motion, state = 'on'\n• Mode active: entity = input_boolean.vacation_mode, state = 'off'",
        "data": {
          "entity_id": "Entity",
          "state": "Required State"
        },
        "data_description": {
          "entity_id": "Entity to check (any domain)",
          "state": "Expected state value (e.g., 'on', 'off', 'home')"
        }
      },
      "configure_numeric_state_condition": {
        "title": "Configure Numeric State Condition",
        "description": "Compare a numeric entity value with thresholds.\n\n**Examples:**\n• Outdoor temp < 15°C: entity = sensor.outdoor_temp, below = 15\n• Battery low: entity = sensor.battery, below = 20\n• Humidity range: entity = sensor.humidity, above = 30, below = 70\n\n**Note:** At least one of 'above' or 'below' is required.",
        "data": {
          "entity_id": "Sensor Entity",
          "above": "Above (optional)",
          "below": "Below (optional)"
        },
        "data_description": {
          "entity_id": "Numeric sensor to check",
          "above": "Value must be greater than this (leave empty if not needed)",
          "below": "Value must be less than this (leave empty if not needed)"
        }
      },
      "configure_time_condition": {
        "title": "Configure Time Condition",
        "description": "Activate only during specific time ranges and/or weekdays.\n\n**Examples:**\n• Work hours: after = 08:00, before = 18:00, weekday = [mon, tue, wed, thu, fri]\n• Night only: after = 22:00, before = 07:00\n• Weekends: weekday = [sat, sun]\n\n**Time Format:** HH:MM (24-hour format)",
        "data": {
          "after": "After (HH:MM, optional)",
          "before": "Before (HH:MM, optional)",
          "weekday": "Weekdays (optional)"
        },
        "data_description": {
          "after": "Start time (e.g., 08:00)",
          "before": "End time (e.g., 18:00)",
          "weekday": "Active on these weekdays only"
        }
      },
      "configure_template_condition": {
        "title": "Configure Template Condition",
        "description": "Use Jinja2 templates for complex custom logic.\n\n**Examples:**\n\n**Multiple sensors:**\n```\n{{ states('sensor.outdoor_temp')|float < 15 and\n   states('binary_sensor.window')|string == 'off' }}\n```\n\n**Delta temperature:**\n```\n{{ (states('sensor.indoor_temp')|float - states('sensor.outdoor_temp')|float) < 5 }}\n```\n\n**Counting entities:**\n```\n{{ states.binary_sensor\n   | selectattr('state', 'eq', 'on')\n   | selectattr('entity_id', 'search', 'window')\n   | list | count == 0 }}\n```\n\n**Template must return True/False**",
        "data": {
          "value_template": "Jinja2 Template"
        },
        "data_description": {
          "value_template": "Template that evaluates to True/False"
        }
      },
      "conditions_summary": {
        "title": "Conditions Summary",
        "description": "**Configured Conditions ({condition_count}):**\n\n{summary}\n\n**Reminder:** All conditions must pass (AND logic) for binding to activate.\n\n**Next Steps:**\n• Add more conditions (up to 5 via GUI)\n• Remove last condition if needed\n• Save binding with current conditions\n• Use YAML editor for >5 conditions",
        "data": {
          "action": "What do you want to do?"
        }
      }
    }
  },
  "services": {
    "set_flag": {
      "name": "Set Override Flag",
      "description": "Set an override flag to temporarily alter automatic climate control behavior. Only one flag can be active at a time (mutual exclusion).",
      "fields": {
        "flag_type": {
          "name": "Flag Type",
          "description": "Type of override flag: skip_today (skip until midnight), skip_until_next_slot (skip current slot), or force_slot (force specific slot)."
        },
        "target_slot_id": {
          "name": "Target Slot ID",
          "description": "Target slot ID (required when flag_type is force_slot). Find slot IDs in your configuration."
        }
      }
    },
    "clear_flag": {
      "name": "Clear Override Flag",
      "description": "Clear the currently active override flag and resume normal automatic behavior."
    },
    "force_slot": {
      "name": "Force Slot Activation",
      "description": "Force activation of a specific time slot, ignoring calendar state and time restrictions. This is a convenience wrapper for set_flag with flag_type=force_slot.",
      "fields": {
        "slot_id": {
          "name": "Slot ID",
          "description": "ID of the slot to force activate. The slot will remain active until manually cleared."
        }
      }
    },
    "refresh_now": {
      "name": "Refresh Now",
      "description": "Force immediate coordinator refresh and slot evaluation. Use this to apply configuration changes without waiting for the next automatic update (60 seconds)."
    },
    "add_slot": {
      "name": "Add Slot",
      "description": "Add a new time slot with temperature and mode settings. Slots are automatically validated for overlaps.",
      "fields": {
        "label": {
          "name": "Label",
          "description": "Descriptive name for this slot (e.g., 'Morning Comfort', 'Work Hours')."
        },
        "time_start": {
          "name": "Start Time",
          "description": "Start time in HH:MM format (e.g., '06:00')."
        },
        "time_end": {
          "name": "End Time",
          "description": "End time in HH:MM format (e.g., '09:00'). For overnight slots, use times like '23:00' to '02:00'."
        },
        "days": {
          "name": "Days of Week",
          "description": "List of days when this slot is active. Default: all days."
        },
        "climate_payload": {
          "name": "Climate Settings",
          "description": "Climate settings to apply (temperature, hvac_mode, preset_mode, etc.). At least one field required."
        }
      }
    },
    "remove_slot": {
      "name": "Remove Slot",
      "description": "Remove an existing time slot by its ID.",
      "fields": {
        "slot_id": {
          "name": "Slot ID",
          "description": "ID of the slot to remove. Find slot IDs in logs when adding slots."
        }
      }
    }
  }
}
